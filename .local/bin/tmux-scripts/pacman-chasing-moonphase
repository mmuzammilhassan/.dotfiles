#!/bin/sh

counter=0

while :; do
  # --- 1. Moon Logic (Cycles 4 phases) ---
  moon_frame=$((counter % 4))
  case $moon_frame in
    0) moon="ðŸŒ‘" ;;
    1) moon="ðŸŒ“" ;;
    2) moon="ðŸŒ•" ;;
    3) moon="ðŸŒ—" ;;
  esac

  # --- 2. Pacman Logic (Mouth Open/Closed) ---
  if [ $((counter % 2)) -eq 0 ]; then
    pacman="á—§"
  else
    pacman="á—¤" # O or use á—¤ if your font supports it
  fi

  # --- 3. The "Chase" Distance Logic ---
  # This creates a loop of spaces shrinking from 5 down to 0
  # We use modulo 6 to create a cycle of 6 steps
  step=$((counter % 12)) 
  
  # I'm using a slightly longer cycle (12) so the reset isn't too frantic
  # We map the step to a number of dots/spaces
  case $step in
    0) dist=" Â· Â· Â· " ;;
    1) dist=" Â· Â· " ;;
    2) dist=" Â· " ;;
    3) dist="" ;;      # Caught!
    4) dist="" ;;      # Eating...
    *) dist=" Â· Â· Â· Â· " ;; # Reset/Respawn
  esac

  # --- Final Output ---
  tmux set-option -g status-right "$pacman $dist $moon "

  counter=$((counter + 1))
  sleep 0.25 # Speed of the animation
done
